# Исправление Bad Gateway при работающем приложении

## Ситуация:
✅ Приложение запущено (Uvicorn работает)
❌ Но получаете Bad Gateway в браузере

---

## Решение 1: Проверьте порт в настройках Coolify

### Шаг 1: Проверьте настройки приложения

1. В Coolify откройте ваше приложение
2. Зайдите в **Settings** → **General**
3. Найдите поле **"Port"** или **"Port Mapping"**
4. **Должно быть:** `8000`

Если указано другое (например 3000, 8080, или пусто) - измените на **8000** и сохраните.

---

## Решение 2: Проверьте Health Check

### Шаг 1: Настройки Health Check

1. Settings → **Health Check**
2. Если Health Check включен:
   - **Path:** оставьте `/` или `/health`
   - **Port:** должно быть `8000`
3. Или временно **отключите** Health Check

---

## Решение 3: Проверьте что приложение отвечает

### Проверка через curl (если есть доступ):

```bash
curl http://localhost:8000
```

Должен вернуть HTML код страницы.

---

## Решение 4: Добавьте Health Check эндпоинт

Добавим простой health check в main.py для проверки:

```python
@app.get("/health")
async def health():
    return {"status": "ok"}
```

---

## Решение 5: Проверьте проксирование

Coolify использует nginx для проксирования. Убедитесь что:

1. **Port в Coolify:** `8000`
2. **Port в контейнере:** `8000` (уже правильно)
3. **Health Check Path:** `/` или `/health`

---

## Быстрая проверка:

### Шаг 1: Проверьте порт в Coolify

- Settings → Port → должно быть `8000`

### Шаг 2: Перезапустите приложение

- Нажмите **Restart** или **Redeploy**

### Шаг 3: Проверьте снова

- Откройте URL в браузере

---

## Если все еще не работает:

1. **Отключите Health Check** временно
2. **Убедитесь что порт = 8000**
3. **Проверьте что нет переменных окружения PORT**
4. **Попробуйте другой путь:** `http://your-url/index.html`

---

## Проверка в браузере:

Попробуйте открыть:
- `http://q84oskg0cs044ogwkok0os04.91.107.212.137.sslip.io`
- `http://q84oskg0cs044ogwkok0os04.91.107.212.137.sslip.io/index.html`
- `http://q84oskg0cs044ogwkok0os04.91.107.212.137.sslip.io/health`

Что видите? Все еще Bad Gateway?




